import{s as W,a as X,b as Z,c as ee,d as le,e as te,f as ae,i as oe}from"./BaseServices-kSbkXsot.js";import{s as ie}from"./index-DlYkLogX.js";import{s as se}from"./axios-DYde9zlt.js";import{I as v}from"./IncomeCategoryService-DF4CqXAe.js";import{G as s,H as ne,K as re,o as y,j as _,k as i,x as t,v as n,F as ue,q as h,A as $,t as de,L as ce}from"./index-C0hbRpVK.js";const me={class:"card flex items-center justify-between py-3"},pe=i("h2",{class:"font-semibold text-2xl"},"Income Categories",-1),ve={class:"card"},fe={class:"flex flex-wrap gap-2 items-center justify-between"},be=i("h4",{class:"m-0"},"Manage Income Categories",-1),ge=i("i",{class:"pi pi-search"},null,-1),ye={class:"flex flex-col gap-6"},_e=i("label",{for:"name",class:"block font-bold mb-3"},"Name",-1),Ce={key:0,class:"text-red-500"},xe=i("label",{for:"description",class:"block font-bold mb-3"},"Description",-1),ke={key:0,class:"text-red-500"},he={class:"flex items-center gap-4"},Ie=i("i",{class:"pi pi-exclamation-triangle !text-3xl"},null,-1),we={key:0},De={class:"flex items-center gap-4"},Se=i("i",{class:"pi pi-exclamation-triangle !text-3xl"},null,-1),Ve={key:0},Le={__name:"IncomeCategory",setup(Ue){const e=s(),u=s(),D=s(!1),S=async()=>{try{D.value=!0,u.value=await v.getData()}catch(o){console.error(o)}finally{D.value=!1}};ne(()=>{S()});const f=re(),V=s(),c=s(!1),C=s(!1),b=s(!1),g=s(!1),U=s(null),m=s(),I=s({global:{value:null,matchMode:ce.CONTAINS}}),d=s(!1);function N(o){U.value=o.files[0]}function P(){e.value={},d.value=!1,c.value=!0}function F(){c.value=!1,d.value=!1}async function M(){var o;if(d.value=!0,(o=e==null?void 0:e.value.description)!=null&&o.trim()&&(e!=null&&e.value.name)){if(e.value.id)await v.update(e.value.id,{name:e.value.name,description:e.value.description}),u.value[q(e.value.id)]=e.value,f.add({severity:"success",summary:"Successful",detail:"Income Categories Updated",life:3e3});else{const l=await v.create({name:e.value.name,description:e.value.description});u.value.unshift(l.data),f.add({severity:"success",summary:"Successful",detail:"Income Categories Created",life:3e3})}c.value=!1,e.value={}}}function L(o){e.value={id:o.id,name:o.name,description:o.description},c.value=!0}function T(o){e.value=o,b.value=!0}function B(){v.delete(e.value.id),u.value=u.value.filter(o=>o.id!==e.value.id),b.value=!1,e.value={},f.add({severity:"success",summary:"Successful",detail:"Income Deleted",life:3e3})}function q(o){let l=-1;for(let p=0;p<u.value.length;p++)if(u.value[p].id===o){l=p;break}return l}function A(){V.value.exportCSV()}function R(){v.import({file:U.value}).then(()=>{S()}).catch(o=>{console.error(o)}),C.value=!1,f.add({severity:"info",summary:"Success",detail:"File Uploaded",life:3e3})}function j(){g.value=!0}function E(){let o=m.value.map(l=>l.id);v.bulkDelete({ids:o}),u.value=e.value.filter(l=>!o.includes(l.id)),g.value=!1,m.value=null,f.add({severity:"success",summary:"Successful",detail:"Income Deleted",life:3e3})}const H=s([{label:"Dashboard",to:"/"},{label:"Master Data"},{label:"Income Categories"}]),K=s({icon:"pi pi-home",to:"/"});return(o,l)=>{const p=W,r=se,O=X,Y=le,w=ie,z=te,x=ae,G=Z,k=ee,J=oe;return y(),_(ue,null,[i("div",me,[pe,t(p,{home:K.value,model:H.value},null,8,["home","model"])]),i("div",null,[i("div",ve,[t(O,{class:"mb-6"},{start:n(()=>[t(r,{label:"New",icon:"pi pi-plus",severity:"secondary",class:"mr-2",onClick:P}),t(r,{label:"Delete",icon:"pi pi-trash",severity:"secondary",onClick:j,disabled:!m.value||!m.value.length},null,8,["disabled"])]),end:n(()=>[t(r,{label:"Import",icon:"pi pi-download",severity:"secondary mx-2",onClick:l[0]||(l[0]=a=>C.value=!0)}),t(r,{label:"Export",icon:"pi pi-upload",severity:"secondary",onClick:l[1]||(l[1]=a=>A(a))})]),_:1}),t(G,{ref_key:"dt",ref:V,selection:m.value,"onUpdate:selection":l[3]||(l[3]=a=>m.value=a),value:u.value,dataKey:"id",paginator:!0,rows:10,filters:I.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} income categories"},{header:n(()=>[i("div",fe,[be,t(z,null,{default:n(()=>[t(Y,null,{default:n(()=>[ge]),_:1}),t(w,{modelValue:I.value.global.value,"onUpdate:modelValue":l[2]||(l[2]=a=>I.value.global.value=a),placeholder:"Search..."},null,8,["modelValue"])]),_:1})])]),default:n(()=>[t(x,{selectionMode:"multiple",style:{width:"3rem"},exportable:!1}),t(x,{field:"name",header:"Name",sortable:""}),t(x,{field:"description",header:"Description",sortable:""}),t(x,{exportable:!1},{body:n(a=>[t(r,{icon:"pi pi-pencil",outlined:"",rounded:"",class:"mr-2",onClick:Q=>L(a.data)},null,8,["onClick"]),t(r,{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:Q=>T(a.data)},null,8,["onClick"])]),_:1})]),_:1},8,["selection","value","filters"])]),t(k,{visible:c.value,"onUpdate:visible":l[6]||(l[6]=a=>c.value=a),style:{width:"450px"},header:"Income Category Details",modal:!0},{footer:n(()=>[t(r,{label:"Cancel",icon:"pi pi-times",text:"",onClick:F}),t(r,{label:"Save",icon:"pi pi-check",onClick:M})]),default:n(()=>[i("div",ye,[i("div",null,[_e,t(w,{id:"name",modelValue:e.value.name,"onUpdate:modelValue":l[4]||(l[4]=a=>e.value.name=a),modelModifiers:{trim:!0},required:"true",autofocus:"",invalid:d.value&&!e.value.name,fluid:""},null,8,["modelValue","invalid"]),d.value&&!e.value.name?(y(),_("small",Ce,"name is required.")):h("",!0)]),i("div",null,[xe,t(w,{id:"description",modelValue:e.value.description,"onUpdate:modelValue":l[5]||(l[5]=a=>e.value.description=a),modelModifiers:{trim:!0},required:"true",autofocus:"",invalid:d.value&&!e.value.description,fluid:""},null,8,["modelValue","invalid"]),d.value&&!e.value.description?(y(),_("small",ke,"description is required.")):h("",!0)])])]),_:1},8,["visible"]),t(k,{visible:C.value,"onUpdate:visible":l[7]||(l[7]=a=>C.value=a),style:{width:"450px"},header:"Import Income Categories",modal:!0},{default:n(()=>[t(J,{name:"file",onUploader:R,onSelect:N,maxFileSize:1e6,customUpload:""})]),_:1},8,["visible"]),t(k,{visible:b.value,"onUpdate:visible":l[9]||(l[9]=a=>b.value=a),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[t(r,{label:"No",icon:"pi pi-times",text:"",onClick:l[8]||(l[8]=a=>b.value=!1)}),t(r,{label:"Yes",icon:"pi pi-check",onClick:B})]),default:n(()=>[i("div",he,[Ie,e.value?(y(),_("span",we,[$("Are you sure you want to delete "),i("b",null,de(e.value.name),1),$("?")])):h("",!0)])]),_:1},8,["visible"]),t(k,{visible:g.value,"onUpdate:visible":l[11]||(l[11]=a=>g.value=a),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[t(r,{label:"No",icon:"pi pi-times",text:"",onClick:l[10]||(l[10]=a=>g.value=!1)}),t(r,{label:"Yes",icon:"pi pi-check",text:"",onClick:E})]),default:n(()=>[i("div",De,[Se,e.value?(y(),_("span",Ve,"Are you sure you want to delete the selected income categories?")):h("",!0)])]),_:1},8,["visible"])])],64)}}};export{Le as default};
