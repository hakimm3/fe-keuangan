import{s as W,a as X,b as Z,c as ee,d as le,e as te,f as ae,i as se}from"./BaseServices-BULPUDtE.js";import{s as ie}from"./index-6pvBhEup.js";import{s as oe}from"./axios-Ds2gSxib.js";import{E as m}from"./ExpenseCategoryService-B-sgeIr_.js";import{G as o,H as ne,K as re,o as g,j as y,k as i,x as t,v as n,F as ue,q as h,A as $,t as de,L as ce}from"./index-DEkeYv1g.js";const pe={class:"card flex items-center justify-between py-3"},ve=i("h2",{class:"font-semibold text-2xl"},"Expense Categories",-1),me={class:"card"},fe={class:"flex flex-wrap gap-2 items-center justify-between"},xe=i("h4",{class:"m-0"},"Manage Expenses Categories",-1),be=i("i",{class:"pi pi-search"},null,-1),ge={class:"flex flex-col gap-6"},ye=i("label",{for:"name",class:"block font-bold mb-3"},"Name",-1),_e={key:0,class:"text-red-500"},Ce=i("label",{for:"description",class:"block font-bold mb-3"},"Description",-1),ke={key:0,class:"text-red-500"},he={class:"flex items-center gap-4"},Ee=i("i",{class:"pi pi-exclamation-triangle !text-3xl"},null,-1),we={key:0},De={class:"flex items-center gap-4"},Se=i("i",{class:"pi pi-exclamation-triangle !text-3xl"},null,-1),Ve={key:0},Me={__name:"ExpenseCategory",setup(Ue){const l=o(),u=o(),D=o(!1),S=async()=>{try{D.value=!0,u.value=await m.getData()}catch(a){console.error(a)}finally{D.value=!1}};ne(()=>{S()});const f=re(),V=o(),c=o(!1),_=o(!1),x=o(!1),b=o(!1),U=o(null),p=o(),E=o({global:{value:null,matchMode:ce.CONTAINS}}),d=o(!1);function N(a){U.value=a.files[0]}function P(){l.value={},d.value=!1,c.value=!0}function F(){c.value=!1,d.value=!1}async function I(){var a;if(d.value=!0,(a=l==null?void 0:l.value.description)!=null&&a.trim()&&(l!=null&&l.value.name)){if(l.value.id)await m.update(l.value.id,{name:l.value.name,description:l.value.description}),u.value[B(l.value.id)]=l.value,f.add({severity:"success",summary:"Successful",detail:"Expense Updated",life:3e3});else{const e=await m.create({name:l.value.name,description:l.value.description});u.value.unshift(e.data),f.add({severity:"success",summary:"Successful",detail:"Expense Created",life:3e3})}c.value=!1,l.value={}}}function M(a){l.value={id:a.id,name:a.name,description:a.description},c.value=!0}function L(a){l.value=a,x.value=!0}function T(){m.delete(l.value.id),u.value=u.value.filter(a=>a.id!==l.value.id),x.value=!1,l.value={},f.add({severity:"success",summary:"Successful",detail:"Expense Deleted",life:3e3})}function B(a){let e=-1;for(let v=0;v<u.value.length;v++)if(u.value[v].id===a){e=v;break}return e}function q(){V.value.exportCSV()}function A(){m.import({file:U.value}).then(()=>{S()}).catch(a=>{console.error(a)}),_.value=!1,f.add({severity:"info",summary:"Success",detail:"File Uploaded",life:3e3})}function R(){b.value=!0}function j(){let a=p.value.map(e=>e.id);m.bulkDelete({ids:a}),u.value=l.value.filter(e=>!a.includes(e.id)),b.value=!1,p.value=null,f.add({severity:"success",summary:"Successful",detail:"Expenses Deleted",life:3e3})}const H=o([{label:"Dashboard",to:"/"},{label:"Master Data"},{label:"Expense Categories"}]),K=o({icon:"pi pi-home",to:"/"});return(a,e)=>{const v=W,r=oe,O=X,Y=le,w=ie,z=te,C=ae,G=Z,k=ee,J=se;return g(),y(ue,null,[i("div",pe,[ve,t(v,{home:K.value,model:H.value},null,8,["home","model"])]),i("div",null,[i("div",me,[t(O,{class:"mb-6"},{start:n(()=>[t(r,{label:"New",icon:"pi pi-plus",severity:"secondary",class:"mr-2",onClick:P}),t(r,{label:"Delete",icon:"pi pi-trash",severity:"secondary",onClick:R,disabled:!p.value||!p.value.length},null,8,["disabled"])]),end:n(()=>[t(r,{label:"Import",icon:"pi pi-download",severity:"secondary mx-2",onClick:e[0]||(e[0]=s=>_.value=!0)}),t(r,{label:"Export",icon:"pi pi-upload",severity:"secondary",onClick:e[1]||(e[1]=s=>q(s))})]),_:1}),t(G,{ref_key:"dt",ref:V,selection:p.value,"onUpdate:selection":e[3]||(e[3]=s=>p.value=s),value:u.value,dataKey:"id",paginator:!0,rows:10,filters:E.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} expense categories"},{header:n(()=>[i("div",fe,[xe,t(z,null,{default:n(()=>[t(Y,null,{default:n(()=>[be]),_:1}),t(w,{modelValue:E.value.global.value,"onUpdate:modelValue":e[2]||(e[2]=s=>E.value.global.value=s),placeholder:"Search..."},null,8,["modelValue"])]),_:1})])]),default:n(()=>[t(C,{selectionMode:"multiple",style:{width:"3rem"},exportable:!1}),t(C,{field:"name",header:"Name",sortable:""}),t(C,{field:"description",header:"Description",sortable:""}),t(C,{exportable:!1},{body:n(s=>[t(r,{icon:"pi pi-pencil",outlined:"",rounded:"",class:"mr-2",onClick:Q=>M(s.data)},null,8,["onClick"]),t(r,{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:Q=>L(s.data)},null,8,["onClick"])]),_:1})]),_:1},8,["selection","value","filters"])]),t(k,{visible:c.value,"onUpdate:visible":e[6]||(e[6]=s=>c.value=s),style:{width:"450px"},header:"Expense Category Details",modal:!0},{footer:n(()=>[t(r,{label:"Cancel",icon:"pi pi-times",text:"",onClick:F}),t(r,{label:"Save",icon:"pi pi-check",onClick:I})]),default:n(()=>[i("div",ge,[i("div",null,[ye,t(w,{id:"name",modelValue:l.value.name,"onUpdate:modelValue":e[4]||(e[4]=s=>l.value.name=s),modelModifiers:{trim:!0},required:"true",autofocus:"",invalid:d.value&&!l.value.name,fluid:""},null,8,["modelValue","invalid"]),d.value&&!l.value.name?(g(),y("small",_e,"name is required.")):h("",!0)]),i("div",null,[Ce,t(w,{id:"description",modelValue:l.value.description,"onUpdate:modelValue":e[5]||(e[5]=s=>l.value.description=s),modelModifiers:{trim:!0},required:"true",autofocus:"",invalid:d.value&&!l.value.description,fluid:""},null,8,["modelValue","invalid"]),d.value&&!l.value.description?(g(),y("small",ke,"description is required.")):h("",!0)])])]),_:1},8,["visible"]),t(k,{visible:_.value,"onUpdate:visible":e[7]||(e[7]=s=>_.value=s),style:{width:"450px"},header:"Import Expense",modal:!0},{default:n(()=>[t(J,{name:"file",onUploader:A,onSelect:N,maxFileSize:1e6,customUpload:""})]),_:1},8,["visible"]),t(k,{visible:x.value,"onUpdate:visible":e[9]||(e[9]=s=>x.value=s),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[t(r,{label:"No",icon:"pi pi-times",text:"",onClick:e[8]||(e[8]=s=>x.value=!1)}),t(r,{label:"Yes",icon:"pi pi-check",onClick:T})]),default:n(()=>[i("div",he,[Ee,l.value?(g(),y("span",we,[$("Are you sure you want to delete "),i("b",null,de(l.value.name),1),$("?")])):h("",!0)])]),_:1},8,["visible"]),t(k,{visible:b.value,"onUpdate:visible":e[11]||(e[11]=s=>b.value=s),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[t(r,{label:"No",icon:"pi pi-times",text:"",onClick:e[10]||(e[10]=s=>b.value=!1)}),t(r,{label:"Yes",icon:"pi pi-check",text:"",onClick:j})]),default:n(()=>[i("div",De,[Se,a.expense?(g(),y("span",Ve,"Are you sure you want to delete the selected expenses?")):h("",!0)])]),_:1},8,["visible"])])],64)}}};export{Me as default};
