import{B as K,_ as z,s as q,o as T,c as L,a as t,m as I,r as G,u as H,b as u,d as Q,w as X,t as g,e as v}from"./index-CqvKQK5V.js";import{a as Y}from"./axios-BimPEqV4.js";var Z={root:{position:"relative"}},tt={root:"p-chart"},et=K.extend({name:"chart",classes:tt,inlineStyles:Z}),ot={name:"BaseChart",extends:q,props:{type:String,data:null,options:null,plugins:null,width:{type:Number,default:300},height:{type:Number,default:150},canvasProps:{type:null,default:null}},style:et,provide:function(){return{$pcChart:this,$parentInstance:this}}},N={name:"Chart",extends:ot,inheritAttrs:!1,emits:["select","loaded"],chart:null,watch:{data:{handler:function(){this.reinit()},deep:!0},type:function(){this.reinit()},options:function(){this.reinit()}},mounted:function(){this.initChart()},beforeUnmount:function(){this.chart&&(this.chart.destroy(),this.chart=null)},methods:{initChart:function(){var o=this;z(()=>import("./auto.esm-B7Ao7w_R.js"),[]).then(function(a){o.chart&&(o.chart.destroy(),o.chart=null),a&&a.default&&(o.chart=new a.default(o.$refs.canvas,{type:o.type,data:o.data,options:o.options,plugins:o.plugins})),o.$emit("loaded",o.chart)})},getCanvas:function(){return this.$canvas},getChart:function(){return this.chart},getBase64Image:function(){return this.chart.toBase64Image()},refresh:function(){this.chart&&this.chart.update()},reinit:function(){this.initChart()},onCanvasClick:function(o){if(this.chart){var a=this.chart.getElementsAtEventForMode(o,"nearest",{intersect:!0},!1),n=this.chart.getElementsAtEventForMode(o,"dataset",{intersect:!0},!1);a&&a[0]&&n&&this.$emit("select",{originalEvent:o,element:a[0],dataset:n})}},generateLegend:function(){if(this.chart)return this.chart.generateLegend()}}};function _(e){"@babel/helpers - typeof";return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_(e)}function M(e,o){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o&&(n=n.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),a.push.apply(a,n)}return a}function A(e){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?M(Object(a),!0).forEach(function(n){at(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function at(e,o,a){return(o=st(o))in e?Object.defineProperty(e,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[o]=a,e}function st(e){var o=nt(e,"string");return _(o)=="symbol"?o:o+""}function nt(e,o){if(_(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,o||"default");if(_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(e)}var rt=["width","height"];function lt(e,o,a,n,f,i){return T(),L("div",I({class:e.cx("root"),style:e.sx("root")},e.ptmi("root")),[t("canvas",I({ref:"canvas",width:e.width,height:e.height,onClick:o[0]||(o[0]=function(y){return i.onCanvasClick(y)})},A(A({},e.canvasProps),e.ptm("canvas"))),null,16,rt)],16)}N.render=lt;const ct="http://backend.keuangan.net/api/dashboard",it={getDashboardData:async()=>{try{return(await Y.get(`${ct}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data}catch(e){throw e.response.status===401&&(localStorage.removeItem("user"),localStorage.removeItem("token"),G.push("/login")),e}}},dt={class:"grid grid-cols-12 gap-8"},ut={class:"col-span-12 lg:col-span-6 xl:col-span-3"},pt={class:"card mb-0"},ht={class:"flex justify-between mb-4"},mt=t("span",{class:"block text-muted-color font-medium mb-4"},"Expense This Month ",-1),ft={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},_t=t("div",{class:"flex items-center justify-center bg-blue-100 dark:bg-blue-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[t("i",{class:"pi pi-shopping-cart text-blue-500 !text-xl"})],-1),yt=t("span",{class:"text-primary font-medium"}," + 43% ",-1),bt=t("span",{class:"text-muted-color"},"compare to last month",-1),gt={class:"col-span-12 lg:col-span-6 xl:col-span-3"},vt={class:"card mb-0"},xt={class:"flex justify-between mb-4"},Ct=t("span",{class:"block text-muted-color font-medium mb-4"},"Income This Month",-1),kt={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},wt=t("div",{class:"flex items-center justify-center bg-orange-100 dark:bg-orange-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[t("i",{class:"pi pi-dollar text-orange-500 !text-xl"})],-1),Pt=t("span",{class:"text-red-500 font-medium"},"%52- ",-1),St=t("span",{class:"text-muted-color"},"compare to last month",-1),Ot={class:"col-span-12 lg:col-span-6 xl:col-span-3"},Dt={class:"card mb-0"},jt={class:"flex justify-between mb-4"},Et=t("span",{class:"block text-muted-color font-medium mb-4"},"Balance",-1),Bt={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},Vt=t("div",{class:"flex items-center justify-center bg-cyan-100 dark:bg-cyan-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[t("i",{class:"pi pi-users text-cyan-500 !text-xl"})],-1),$t=t("span",{class:"text-primary font-medium"},"520 ",-1),It=t("span",{class:"text-muted-color"},"newly registered",-1),Mt={class:"col-span-12 lg:col-span-6 xl:col-span-3"},At={class:"card mb-0"},Tt={class:"flex justify-between mb-4"},Lt=t("span",{class:"block text-muted-color font-medium mb-4"},"Combined Wallet Balance",-1),Nt={class:"text-surface-900 dark:text-surface-0 font-medium text-xl"},Rt=t("div",{class:"flex items-center justify-center bg-purple-100 dark:bg-purple-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},[t("i",{class:"pi pi-comment text-purple-500 !text-xl"})],-1),Ft=t("span",{class:"text-primary font-medium"},"85 ",-1),Jt=t("span",{class:"text-muted-color"},"responded",-1),Ut={class:"col-span-12 xl:col-span-6"},Wt={class:"card"},Kt=t("div",{class:"font-semibold text-xl mb-4"},"Expense Stream",-1),zt={class:"card"},qt=t("div",{class:"font-semibold text-xl mb-4"},"Monthly Cashflow",-1),Gt={class:"col-span-12 xl:col-span-6"},Ht={class:"card"},Qt=t("div",{class:"font-semibold text-xl mb-4"},"Revenue Stream",-1),Xt={class:"card"},Yt=t("div",{class:"font-semibold text-xl mb-4"},"Expense by Wallet",-1),Zt={class:"flex flex-col items-center"},oe={__name:"Dashboard",setup(e){const{getPrimary:o,getSurface:a,isDarkTheme:n}=H(),f=u(null),i=u(null),y=u(null),w=u(null),P=u(null),S=u(null),O=u(null),x=u(0),C=u(0),D=u(0);Q(()=>{f.value=B(),j()});async function j(){i.value=await it.getDashboardData(),x.value=i.value.data.total_expense_this_month,C.value=i.value.data.total_income_this_month,D.value=i.value.data.total_money_in_all_wallet,S.value=E(i.value.data.expense_stream_by_month),O.value=E(i.value.data.income_stream_by_month),y.value=F(i.value.data.income_vs_expense_by_month),P.value=J(i.value.data.expense_by_wallet)}function E(r){const l=["January","February","March","April","May","June","July","August","September","October","November","December"],s=Object.keys(r).sort((p,m)=>l.indexOf(p)-l.indexOf(m)),d=[],c={};return s.forEach(p=>{r[p].forEach(m=>{c[m.category]||(c[m.category]={label:`${m.category}`,data:Array(s.length).fill(0),backgroundColor:R(),borderColor:"transparent"},d.push(c[m.category]));const W=s.indexOf(p);c[m.category].data[W]=m.total})}),{labels:s,datasets:d}}function R(){const r="0123456789ABCDEF";let l="#";for(let s=0;s<6;s++)l+=r[Math.floor(Math.random()*16)];return l}function B(){const r=getComputedStyle(document.documentElement),l=r.getPropertyValue("--surface-border"),s=r.getPropertyValue("--text-color-secondary");return{maintainAspectRatio:!1,aspectRatio:.8,scales:{x:{stacked:!0,ticks:{color:s},grid:{color:"transparent",borderColor:"transparent"}},y:{stacked:!0,ticks:{color:s},grid:{color:l,borderColor:"transparent",drawTicks:!1}}}}}const h=getComputedStyle(document.documentElement),V=h.getPropertyValue("--text-color"),$=h.getPropertyValue("--text-color-secondary"),k=h.getPropertyValue("--surface-border");function F(r){const l=Object.keys(r),s=l.map(c=>r[c].income),d=l.map(c=>r[c].expense);return{labels:l,datasets:[{label:"Income",data:s,fill:!1,backgroundColor:h.getPropertyValue("--p-green-700"),borderColor:h.getPropertyValue("--p-green-700"),tension:.4},{label:"Expense",data:d,fill:!1,backgroundColor:h.getPropertyValue("--p-orange-500"),borderColor:h.getPropertyValue("--p-orange-500"),tension:.4},{label:"Balance",data:s.map((c,p)=>c-d[p]),fill:!1,backgroundColor:h.getPropertyValue("--p-blue-500"),borderColor:h.getPropertyValue("--p-blue-500"),tension:.4}]}}w.value={plugins:{legend:{labels:{fontColor:V}}},scales:{x:{ticks:{color:$},grid:{color:k,drawBorder:!1}},y:{ticks:{color:$},grid:{color:k,drawBorder:!1}}}};const b=r=>r.toLocaleString("id-ID",{style:"currency",currency:"IDR"});function J(r){const l=r.map(p=>p.wallet),s=r.map(p=>p.total),d=getComputedStyle(document.documentElement),c=[d.getPropertyValue("--p-indigo-500"),d.getPropertyValue("--p-purple-500"),d.getPropertyValue("--p-teal-500"),d.getPropertyValue("--p-orange-500"),d.getPropertyValue("--p-red-500")];return{labels:l,datasets:[{data:s,backgroundColor:c.slice(0,r.length),label:"Wallet Totals"}]}}const U=u({plugins:{legend:{labels:{color:V}}},scales:{r:{grid:{color:k}}}});return X([o,a,n],()=>{f.value=B(),i.value=j()}),(r,l)=>{const s=N;return T(),L("div",dt,[t("div",ut,[t("div",pt,[t("div",ht,[t("div",null,[mt,t("div",ft,g(b(x.value-0)),1)]),_t]),yt,bt])]),t("div",gt,[t("div",vt,[t("div",xt,[t("div",null,[Ct,t("div",kt,g(b(C.value-0)),1)]),wt]),Pt,St])]),t("div",Ot,[t("div",Dt,[t("div",jt,[t("div",null,[Et,t("div",Bt,g(b(C.value-x.value)),1)]),Vt]),$t,It])]),t("div",Mt,[t("div",At,[t("div",Tt,[t("div",null,[Lt,t("div",Nt,g(b(D.value-0)),1)]),Rt]),Ft,Jt])]),t("div",Ut,[t("div",Wt,[Kt,v(s,{type:"bar",data:S.value,options:f.value,class:"h-80"},null,8,["data","options"])]),t("div",zt,[qt,v(s,{type:"line",data:y.value,options:w.value},null,8,["data","options"])])]),t("div",Gt,[t("div",Ht,[Qt,v(s,{type:"bar",data:O.value,options:f.value,class:"h-80"},null,8,["data","options"])]),t("div",Xt,[Yt,t("div",Zt,[v(s,{type:"polarArea",data:P.value,options:U.value,class:"h-100"},null,8,["data","options"])])])])])}}};export{oe as default};
