import{s as W,a as X,b as Z,c as ee,d as le,e as te,f as ae,i as se}from"./BaseServices-C_UKSvfQ.js";import{s as oe}from"./index-DvlnKz5W.js";import{s as ie}from"./axios-D69jWvol.js";import{E as v}from"./ExpenseCategoryService-BMT6Ofkw.js";import{G as i,H as ne,K as re,o as C,j as k,k as o,x as l,v as n,F as ue,q as w,A as $,t as de,L as ce}from"./index-C0siwK5o.js";const pe={class:"card flex items-center justify-between py-3"},ve=o("h2",{class:"font-semibold text-2xl"},"Expense Categories",-1),me={class:"card"},fe={class:"flex flex-wrap gap-2 items-center justify-between"},xe=o("h4",{class:"m-0"},"Manage Expenses Categories",-1),be=o("i",{class:"pi pi-search"},null,-1),ge={class:"flex flex-col gap-6"},ye=o("label",{for:"name",class:"block font-bold mb-3"},"Name",-1),_e={key:0,class:"text-red-500"},Ce=o("label",{for:"description",class:"block font-bold mb-3"},"Description",-1),ke={class:"flex items-center gap-4"},he=o("i",{class:"pi pi-exclamation-triangle !text-3xl"},null,-1),Ee={key:0},we={class:"flex items-center gap-4"},De=o("i",{class:"pi pi-exclamation-triangle !text-3xl"},null,-1),Se={key:0},Ie={__name:"ExpenseCategory",setup(Ve){const t=i(),u=i(),D=i(!1),S=async()=>{try{D.value=!0,u.value=await v.getData()}catch(s){console.error(s)}finally{D.value=!1}};ne(()=>{S()});const m=re(),V=i(),d=i(!1),g=i(!1),f=i(!1),x=i(!1),U=i(null),c=i(),h=i({global:{value:null,matchMode:ce.CONTAINS}}),b=i(!1);function N(s){U.value=s.files[0]}function P(){t.value={},b.value=!1,d.value=!0}function F(){d.value=!1,b.value=!1}async function I(){if(b.value=!0,t!=null&&t.value.name){if(t.value.id)await v.update(t.value.id,{name:t.value.name,description:t.value.description}),u.value[B(t.value.id)]=t.value,m.add({severity:"success",summary:"Successful",detail:"Expense Updated",life:3e3});else{const s=await v.create({name:t.value.name,description:t.value.description});u.value.unshift(s.data),m.add({severity:"success",summary:"Successful",detail:"Expense Created",life:3e3})}d.value=!1,t.value={}}}function M(s){t.value={id:s.id,name:s.name,description:s.description},d.value=!0}function L(s){t.value=s,f.value=!0}function T(){v.delete(t.value.id),u.value=u.value.filter(s=>s.id!==t.value.id),f.value=!1,t.value={},m.add({severity:"success",summary:"Successful",detail:"Expense Deleted",life:3e3})}function B(s){let e=-1;for(let p=0;p<u.value.length;p++)if(u.value[p].id===s){e=p;break}return e}function q(){V.value.exportCSV()}function A(){v.import({file:U.value}).then(()=>{S()}).catch(s=>{console.error(s)}),g.value=!1,m.add({severity:"info",summary:"Success",detail:"File Uploaded",life:3e3})}function R(){x.value=!0}function j(){let s=c.value.map(e=>e.id);v.bulkDelete({ids:s}),u.value=t.value.filter(e=>!s.includes(e.id)),x.value=!1,c.value=null,m.add({severity:"success",summary:"Successful",detail:"Expenses Deleted",life:3e3})}const H=i([{label:"Dashboard",to:"/"},{label:"Master Data"},{label:"Expense Categories"}]),K=i({icon:"pi pi-home",to:"/"});return(s,e)=>{const p=W,r=ie,O=X,Y=le,E=oe,z=te,y=ae,G=Z,_=ee,J=se;return C(),k(ue,null,[o("div",pe,[ve,l(p,{home:K.value,model:H.value},null,8,["home","model"])]),o("div",null,[o("div",me,[l(O,{class:"mb-6"},{start:n(()=>[l(r,{label:"New",icon:"pi pi-plus",severity:"secondary",class:"mr-2",onClick:P}),l(r,{label:"Delete",icon:"pi pi-trash",severity:"secondary",onClick:R,disabled:!c.value||!c.value.length},null,8,["disabled"])]),end:n(()=>[l(r,{label:"Import",icon:"pi pi-download",severity:"secondary mx-2",onClick:e[0]||(e[0]=a=>g.value=!0)}),l(r,{label:"Export",icon:"pi pi-upload",severity:"secondary",onClick:e[1]||(e[1]=a=>q(a))})]),_:1}),l(G,{ref_key:"dt",ref:V,selection:c.value,"onUpdate:selection":e[3]||(e[3]=a=>c.value=a),value:u.value,dataKey:"id",paginator:!0,rows:10,filters:h.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} expense categories"},{header:n(()=>[o("div",fe,[xe,l(z,null,{default:n(()=>[l(Y,null,{default:n(()=>[be]),_:1}),l(E,{modelValue:h.value.global.value,"onUpdate:modelValue":e[2]||(e[2]=a=>h.value.global.value=a),placeholder:"Search..."},null,8,["modelValue"])]),_:1})])]),default:n(()=>[l(y,{selectionMode:"multiple",style:{width:"3rem"},exportable:!1}),l(y,{field:"name",header:"Name",sortable:""}),l(y,{field:"description",header:"Description",sortable:""}),l(y,{exportable:!1},{body:n(a=>[l(r,{icon:"pi pi-pencil",outlined:"",rounded:"",class:"mr-2",onClick:Q=>M(a.data)},null,8,["onClick"]),l(r,{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:Q=>L(a.data)},null,8,["onClick"])]),_:1})]),_:1},8,["selection","value","filters"])]),l(_,{visible:d.value,"onUpdate:visible":e[6]||(e[6]=a=>d.value=a),style:{width:"450px"},header:"Expense Category Details",modal:!0},{footer:n(()=>[l(r,{label:"Cancel",icon:"pi pi-times",text:"",onClick:F}),l(r,{label:"Save",icon:"pi pi-check",onClick:I})]),default:n(()=>[o("div",ge,[o("div",null,[ye,l(E,{id:"name",modelValue:t.value.name,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.name=a),modelModifiers:{trim:!0},required:"true",autofocus:"",invalid:b.value&&!t.value.name,fluid:""},null,8,["modelValue","invalid"]),b.value&&!t.value.name?(C(),k("small",_e,"name is required.")):w("",!0)]),o("div",null,[Ce,l(E,{id:"description",modelValue:t.value.description,"onUpdate:modelValue":e[5]||(e[5]=a=>t.value.description=a),modelModifiers:{trim:!0},required:"true",autofocus:"",fluid:""},null,8,["modelValue"])])])]),_:1},8,["visible"]),l(_,{visible:g.value,"onUpdate:visible":e[7]||(e[7]=a=>g.value=a),style:{width:"450px"},header:"Import Expense",modal:!0},{default:n(()=>[l(J,{name:"file",onUploader:A,onSelect:N,maxFileSize:1e6,customUpload:""})]),_:1},8,["visible"]),l(_,{visible:f.value,"onUpdate:visible":e[9]||(e[9]=a=>f.value=a),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[l(r,{label:"No",icon:"pi pi-times",text:"",onClick:e[8]||(e[8]=a=>f.value=!1)}),l(r,{label:"Yes",icon:"pi pi-check",onClick:T})]),default:n(()=>[o("div",ke,[he,t.value?(C(),k("span",Ee,[$("Are you sure you want to delete "),o("b",null,de(t.value.name),1),$("?")])):w("",!0)])]),_:1},8,["visible"]),l(_,{visible:x.value,"onUpdate:visible":e[11]||(e[11]=a=>x.value=a),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[l(r,{label:"No",icon:"pi pi-times",text:"",onClick:e[10]||(e[10]=a=>x.value=!1)}),l(r,{label:"Yes",icon:"pi pi-check",text:"",onClick:j})]),default:n(()=>[o("div",we,[De,s.expense?(C(),k("span",Se,"Are you sure you want to delete the selected expenses?")):w("",!0)])]),_:1},8,["visible"])])],64)}}};export{Ie as default};
