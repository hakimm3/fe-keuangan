import{s as W,a as X,b as Z,c as ee,d as le,e as te,f as ae,i as oe}from"./BaseServices-C_UKSvfQ.js";import{s as ie}from"./index-DvlnKz5W.js";import{s as se}from"./axios-D69jWvol.js";import{I as p}from"./IncomeCategoryService-DUQtb-ng.js";import{G as s,H as ne,K as re,o as x,j as k,k as i,x as l,v as n,F as ue,q as w,A as $,t as de,L as ce}from"./index-C0siwK5o.js";const me={class:"card flex items-center justify-between py-3"},pe=i("h2",{class:"font-semibold text-2xl"},"Income Categories",-1),ve={class:"card"},fe={class:"flex flex-wrap gap-2 items-center justify-between"},be=i("h4",{class:"m-0"},"Manage Income Categories",-1),ge=i("i",{class:"pi pi-search"},null,-1),ye={class:"flex flex-col gap-6"},_e=i("label",{for:"name",class:"block font-bold mb-3"},"Name",-1),Ce={key:0,class:"text-red-500"},xe=i("label",{for:"description",class:"block font-bold mb-3"},"Description",-1),ke={class:"flex items-center gap-4"},he=i("i",{class:"pi pi-exclamation-triangle !text-3xl"},null,-1),Ie={key:0},we={class:"flex items-center gap-4"},De=i("i",{class:"pi pi-exclamation-triangle !text-3xl"},null,-1),Se={key:0},Me={__name:"IncomeCategory",setup(Ve){const t=s(),u=s(),D=s(!1),S=async()=>{try{D.value=!0,u.value=await p.getData()}catch(o){console.error(o)}finally{D.value=!1}};ne(()=>{S()});const v=re(),V=s(),d=s(!1),y=s(!1),f=s(!1),b=s(!1),U=s(null),c=s(),h=s({global:{value:null,matchMode:ce.CONTAINS}}),g=s(!1);function N(o){U.value=o.files[0]}function P(){t.value={},g.value=!1,d.value=!0}function F(){d.value=!1,g.value=!1}async function M(){if(g.value=!0,t!=null&&t.value.name){if(t.value.id)await p.update(t.value.id,{name:t.value.name,description:t.value.description}),u.value[q(t.value.id)]=t.value,v.add({severity:"success",summary:"Successful",detail:"Income Categories Updated",life:3e3});else{const o=await p.create({name:t.value.name,description:t.value.description});u.value.unshift(o.data),v.add({severity:"success",summary:"Successful",detail:"Income Categories Created",life:3e3})}d.value=!1,t.value={}}}function L(o){t.value={id:o.id,name:o.name,description:o.description},d.value=!0}function T(o){t.value=o,f.value=!0}function B(){p.delete(t.value.id),u.value=u.value.filter(o=>o.id!==t.value.id),f.value=!1,t.value={},v.add({severity:"success",summary:"Successful",detail:"Income Deleted",life:3e3})}function q(o){let e=-1;for(let m=0;m<u.value.length;m++)if(u.value[m].id===o){e=m;break}return e}function A(){V.value.exportCSV()}function R(){p.import({file:U.value}).then(()=>{S()}).catch(o=>{console.error(o)}),y.value=!1,v.add({severity:"info",summary:"Success",detail:"File Uploaded",life:3e3})}function j(){b.value=!0}function E(){let o=c.value.map(e=>e.id);p.bulkDelete({ids:o}),u.value=t.value.filter(e=>!o.includes(e.id)),b.value=!1,c.value=null,v.add({severity:"success",summary:"Successful",detail:"Income Deleted",life:3e3})}const H=s([{label:"Dashboard",to:"/"},{label:"Master Data"},{label:"Income Categories"}]),K=s({icon:"pi pi-home",to:"/"});return(o,e)=>{const m=W,r=se,O=X,Y=le,I=ie,z=te,_=ae,G=Z,C=ee,J=oe;return x(),k(ue,null,[i("div",me,[pe,l(m,{home:K.value,model:H.value},null,8,["home","model"])]),i("div",null,[i("div",ve,[l(O,{class:"mb-6"},{start:n(()=>[l(r,{label:"New",icon:"pi pi-plus",severity:"secondary",class:"mr-2",onClick:P}),l(r,{label:"Delete",icon:"pi pi-trash",severity:"secondary",onClick:j,disabled:!c.value||!c.value.length},null,8,["disabled"])]),end:n(()=>[l(r,{label:"Import",icon:"pi pi-download",severity:"secondary mx-2",onClick:e[0]||(e[0]=a=>y.value=!0)}),l(r,{label:"Export",icon:"pi pi-upload",severity:"secondary",onClick:e[1]||(e[1]=a=>A(a))})]),_:1}),l(G,{ref_key:"dt",ref:V,selection:c.value,"onUpdate:selection":e[3]||(e[3]=a=>c.value=a),value:u.value,dataKey:"id",paginator:!0,rows:10,filters:h.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} income categories"},{header:n(()=>[i("div",fe,[be,l(z,null,{default:n(()=>[l(Y,null,{default:n(()=>[ge]),_:1}),l(I,{modelValue:h.value.global.value,"onUpdate:modelValue":e[2]||(e[2]=a=>h.value.global.value=a),placeholder:"Search..."},null,8,["modelValue"])]),_:1})])]),default:n(()=>[l(_,{selectionMode:"multiple",style:{width:"3rem"},exportable:!1}),l(_,{field:"name",header:"Name",sortable:""}),l(_,{field:"description",header:"Description",sortable:""}),l(_,{exportable:!1},{body:n(a=>[l(r,{icon:"pi pi-pencil",outlined:"",rounded:"",class:"mr-2",onClick:Q=>L(a.data)},null,8,["onClick"]),l(r,{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:Q=>T(a.data)},null,8,["onClick"])]),_:1})]),_:1},8,["selection","value","filters"])]),l(C,{visible:d.value,"onUpdate:visible":e[6]||(e[6]=a=>d.value=a),style:{width:"450px"},header:"Income Category Details",modal:!0},{footer:n(()=>[l(r,{label:"Cancel",icon:"pi pi-times",text:"",onClick:F}),l(r,{label:"Save",icon:"pi pi-check",onClick:M})]),default:n(()=>[i("div",ye,[i("div",null,[_e,l(I,{id:"name",modelValue:t.value.name,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.name=a),modelModifiers:{trim:!0},required:"true",autofocus:"",invalid:g.value&&!t.value.name,fluid:""},null,8,["modelValue","invalid"]),g.value&&!t.value.name?(x(),k("small",Ce,"name is required.")):w("",!0)]),i("div",null,[xe,l(I,{id:"description",modelValue:t.value.description,"onUpdate:modelValue":e[5]||(e[5]=a=>t.value.description=a),modelModifiers:{trim:!0},required:"true",autofocus:"",fluid:""},null,8,["modelValue"])])])]),_:1},8,["visible"]),l(C,{visible:y.value,"onUpdate:visible":e[7]||(e[7]=a=>y.value=a),style:{width:"450px"},header:"Import Income Categories",modal:!0},{default:n(()=>[l(J,{name:"file",onUploader:R,onSelect:N,maxFileSize:1e6,customUpload:""})]),_:1},8,["visible"]),l(C,{visible:f.value,"onUpdate:visible":e[9]||(e[9]=a=>f.value=a),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[l(r,{label:"No",icon:"pi pi-times",text:"",onClick:e[8]||(e[8]=a=>f.value=!1)}),l(r,{label:"Yes",icon:"pi pi-check",onClick:B})]),default:n(()=>[i("div",ke,[he,t.value?(x(),k("span",Ie,[$("Are you sure you want to delete "),i("b",null,de(t.value.name),1),$("?")])):w("",!0)])]),_:1},8,["visible"]),l(C,{visible:b.value,"onUpdate:visible":e[11]||(e[11]=a=>b.value=a),style:{width:"450px"},header:"Confirm",modal:!0},{footer:n(()=>[l(r,{label:"No",icon:"pi pi-times",text:"",onClick:e[10]||(e[10]=a=>b.value=!1)}),l(r,{label:"Yes",icon:"pi pi-check",text:"",onClick:E})]),default:n(()=>[i("div",we,[De,t.value?(x(),k("span",Se,"Are you sure you want to delete the selected income categories?")):w("",!0)])]),_:1},8,["visible"])])],64)}}};export{Me as default};
